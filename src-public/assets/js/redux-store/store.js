"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const lodash_throttle_1 = __importDefault(require("lodash.throttle"));
const redux_1 = require("redux");
const local_storage_1 = require("./lib/local-storage");
const middleware_1 = __importDefault(require("./lib/middleware"));
const root_reducer_1 = __importDefault(require("./lib/root-reducer"));
// @ts-ignore
const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || redux_1.compose;
const persistedState = local_storage_1.loadState();
const store = redux_1.createStore(root_reducer_1.default, persistedState, composeEnhancers(redux_1.applyMiddleware(middleware_1.default)));
store.subscribe(lodash_throttle_1.default(() => {
    local_storage_1.saveState(store.getState());
}, 1000));
exports.default = store;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RvcmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzdG9yZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLHNFQUF1QztBQUN2QyxpQ0FBNEQ7QUFDNUQsdURBQTJEO0FBQzNELGtFQUEwQztBQUMxQyxzRUFBMEM7QUFFMUMsYUFBYTtBQUNiLE1BQU0sZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLG9DQUFvQyxJQUFJLGVBQU8sQ0FBQztBQUVoRixNQUFNLGNBQWMsR0FBRyx5QkFBUyxFQUFFLENBQUM7QUFDbkMsTUFBTSxLQUFLLEdBQUcsbUJBQVcsQ0FDdkIsc0JBQVEsRUFDUixjQUFjLEVBQ2QsZ0JBQWdCLENBQUMsdUJBQWUsQ0FBQyxvQkFBVSxDQUFDLENBQUMsQ0FDOUMsQ0FBQztBQUVGLEtBQUssQ0FBQyxTQUFTLENBQUMseUJBQVEsQ0FBQyxHQUFHLEVBQUU7SUFDNUIseUJBQVMsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztBQUM5QixDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUVWLGtCQUFlLEtBQUssQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0aHJvdHRsZSBmcm9tICdsb2Rhc2gudGhyb3R0bGUnO1xuaW1wb3J0IHthcHBseU1pZGRsZXdhcmUsIGNvbXBvc2UsIGNyZWF0ZVN0b3JlfSBmcm9tICdyZWR1eCc7XG5pbXBvcnQgeyBsb2FkU3RhdGUsIHNhdmVTdGF0ZSB9IGZyb20gJy4vbGliL2xvY2FsLXN0b3JhZ2UnO1xuaW1wb3J0IG1pZGRsZXdhcmUgZnJvbSAnLi9saWIvbWlkZGxld2FyZSc7XG5pbXBvcnQgcmVkdWNlcnMgZnJvbSAnLi9saWIvcm9vdC1yZWR1Y2VyJztcblxuLy8gQHRzLWlnbm9yZVxuY29uc3QgY29tcG9zZUVuaGFuY2VycyA9IHdpbmRvdy5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9DT01QT1NFX18gfHwgY29tcG9zZTtcblxuY29uc3QgcGVyc2lzdGVkU3RhdGUgPSBsb2FkU3RhdGUoKTtcbmNvbnN0IHN0b3JlID0gY3JlYXRlU3RvcmUoXG4gIHJlZHVjZXJzLFxuICBwZXJzaXN0ZWRTdGF0ZSxcbiAgY29tcG9zZUVuaGFuY2VycyhhcHBseU1pZGRsZXdhcmUobWlkZGxld2FyZSkpLFxuKTtcblxuc3RvcmUuc3Vic2NyaWJlKHRocm90dGxlKCgpID0+IHtcbiAgc2F2ZVN0YXRlKHN0b3JlLmdldFN0YXRlKCkpO1xufSwgMTAwMCkpO1xuXG5leHBvcnQgZGVmYXVsdCBzdG9yZTtcbiJdfQ==